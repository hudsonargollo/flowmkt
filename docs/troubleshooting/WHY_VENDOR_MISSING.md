# Why is vendor/ Directory Missing?

## Quick Answer

The `vendor/` directory is **never stored in Git** - it's always generated by running `composer install`. This is standard practice for all PHP projects.

## What Happened

### Before (Working Site)
```
Old Location (wherever it was):
â”œâ”€â”€ core/
â”‚   â”œâ”€â”€ vendor/          â† Existed (from composer install)
â”‚   â”œâ”€â”€ .env             â† Existed (manually created)
â”‚   â””â”€â”€ app/
â””â”€â”€ index.php
```

### Now (New Location)
```
/home/clubemkt/flow.clubemkt.digital/:
â”œâ”€â”€ core/
â”‚   â”œâ”€â”€ vendor/          â† MISSING (never run composer install)
â”‚   â”œâ”€â”€ .env             â† MISSING (in .gitignore)
â”‚   â””â”€â”€ app/
â””â”€â”€ index.php
```

## Why vendor/ is Not in Git

### Standard Practice
- `vendor/` contains **thousands of files** from Composer packages
- These files are **generated**, not source code
- They would make the repository **huge** (100+ MB)
- They can be **recreated anytime** with `composer install`

### What IS in Git
âœ… `composer.json` - List of dependencies
âœ… `composer.lock` - Exact versions
âœ… Your application code
âœ… Configuration files (except .env)

### What is NOT in Git
âŒ `vendor/` - Composer dependencies (regenerate with `composer install`)
âŒ `.env` - Environment config (contains secrets)
âŒ `node_modules/` - NPM dependencies (regenerate with `npm install`)
âŒ `storage/logs/` - Log files
âŒ `bootstrap/cache/` - Cache files

## Two Possible Scenarios

### Scenario 1: Different Directory

**The old working site is in a different location.**

Your diagnostic showed: `/home/clubemkt/flow.clubemkt.digital/`

But the old site might be at:
- `/home/clubemkt/public_html/`
- `/home/clubemkt/public_html/flow/`
- `/home/clubemkt/www/`

**Solution:** Find the old location and either:
1. Copy `vendor/` and `.env` from there
2. Or point your domain to the old location

### Scenario 2: Fresh Installation

**This is a new/fresh installation that needs setup.**

**Solution:** Run the initial setup:
```bash
cd /home/clubemkt/flow.clubemkt.digital/core
composer install
cp .env.example .env  # or upload your .env
php artisan key:generate
```

## How to Find the Old Installation

### Option 1: Via cPanel File Manager

1. Go to cPanel â†’ File Manager
2. Navigate to `/home/clubemkt/`
3. Look for directories with `core/vendor/` inside
4. Check these common locations:
   - `public_html/`
   - `public_html/flow/`
   - `www/`
   - `htdocs/`

### Option 2: Via SSH (if available)

Upload and run: `scripts/diagnostics/find-working-installation.sh`

```bash
ssh -i ~/.ssh/flowmkt_deploy -p 2222 clubemkt@finn1080.com.br
bash find-working-installation.sh
```

### Option 3: Check Domain Configuration

In cPanel â†’ Domains â†’ Check where `flow.clubemkt.digital` points to:
- Document Root shows the actual path
- This is where the working site is

## Solutions

### Solution 1: Copy from Old Location (Fastest)

If you find the old working installation:

```bash
# Via cPanel File Manager
1. Find old location with vendor/ and .env
2. Copy vendor/ folder to new location
3. Copy .env file to new location
4. Done!
```

### Solution 2: Run Composer Install (Proper Way)

```bash
cd /home/clubemkt/flow.clubemkt.digital/core
composer install --no-dev --optimize-autoloader
```

Contact TurboCloud support to run this for you.

### Solution 3: Point Domain to Old Location

If the old installation works fine:

1. In cPanel â†’ Domains
2. Edit `flow.clubemkt.digital`
3. Change Document Root to the old working path
4. Keep using the old installation

## Why This is Normal

Every Laravel deployment requires:

1. **Clone/pull code from Git**
   ```bash
   git clone https://github.com/hudsonargollo/flowmkt.git
   ```

2. **Install dependencies**
   ```bash
   composer install
   npm install
   ```

3. **Configure environment**
   ```bash
   cp .env.example .env
   php artisan key:generate
   ```

4. **Build assets**
   ```bash
   npm run build
   ```

This is why we created the automated deployment system - it does all this automatically!

## Automated Deployment Solution

Once you set up SSH and GitHub secrets, deployment will:

1. âœ… Pull latest code
2. âœ… Run `composer install` automatically
3. âœ… Run `npm install` and build
4. âœ… Clear and rebuild caches
5. âœ… Set permissions

No manual steps needed!

See: [docs/deployment/DEPLOYMENT_GUIDE.md](../deployment/DEPLOYMENT_GUIDE.md)

## Quick Fix for Now

**Fastest solution:**

1. Find where the old working site is (check cPanel â†’ Domains)
2. Copy `vendor/` and `.env` from there to `/home/clubemkt/flow.clubemkt.digital/core/`
3. Site should work immediately

**Or:**

Contact TurboCloud support:
```
OlÃ¡,

Preciso executar composer install no meu projeto:
cd /home/clubemkt/flow.clubemkt.digital/core
composer install --no-dev --optimize-autoloader

Obrigado!
```

## Summary

- âœ… `vendor/` missing is **normal** - it's never in Git
- âœ… `.env` missing is **normal** - it's never in Git
- âœ… Every Laravel installation needs `composer install`
- âœ… The old site probably still exists somewhere else
- âœ… Find it and copy files, or run `composer install`

---

**This is not a bug - it's how all PHP projects work!** ğŸ¯
